/*
 Ext.ux.form.LovCombo.js is licensed under the terms of the Open Source
 LGPL 3.0 license. Commercial use is permitted to the extent that the 
 code/component(s) do NOT become part of another Open Source or Commercially
 licensed development library or toolkit without explicit permission.

 License details: http://www.gnu.org/licenses/lgpl.html
*/
Ext.ns("Ext.ux");
Ext.ux.IconCombo=Ext.extend(Ext.form.ComboBox,{initComponent:function(){Ext.apply(this,{tpl:'<tpl for="."><div class="x-combo-list-item ux-icon-combo-item {'+this.iconClsField+'}">{'+this.displayField+"}</div></tpl>"});Ext.ux.IconCombo.superclass.initComponent.call(this)},onRender:function(j,p){Ext.ux.IconCombo.superclass.onRender.call(this,j,p);this.wrap.applyStyles({position:"relative"});this.el.addClass("ux-icon-combo-input");this.icon=Ext.DomHelper.append(this.el.up("div.x-form-field-wrap"),{tag:"div",
style:"position:absolute"})},afterRender:function(){Ext.ux.IconCombo.superclass.afterRender.apply(this,arguments);undefined!==this.value&&this.setValue(this.value)},setIconCls:function(){var j=this.store.query(this.valueField,this.getValue()).itemAt(0);if(j&&this.icon)this.icon.className="ux-icon-combo-icon "+j.get(this.iconClsField)},setValue:function(j){Ext.ux.IconCombo.superclass.setValue.call(this,j);this.setIconCls()},clearValue:function(){Ext.ux.IconCombo.superclass.clearValue.call(this);if(this.icon)this.icon.className=
""}});Ext.reg("iconcombo",Ext.ux.IconCombo);Ext.namespace("Ext.ux");
Ext.ux.IconDragSelector=function(j){function p(){w=[];k.all.each(function(a){w[w.length]=a.getRegion()});x=k.el.getRegion()}function t(){return false}function h(a){return!r||a.target==k.el.dom}function m(){k.on("containerclick",t,k,{single:true});if(n){n.dom.parentNode!==k.el.dom&&k.el.dom.appendChild(n.dom);n.setDisplayed("block")}else n=k.el.createChild({cls:"x-view-selector"});p();k.clearSelections()}function f(){var a=u.startXY,b=u.getXY(),c=Math.min(a[0],b[0]),d=Math.min(a[1],b[1]),e=Math.abs(a[0]-
b[0]);a=Math.abs(a[1]-b[1]);g.left=c;g.top=d;g.right=c+e;g.bottom=d+a;g.constrainTo(x);n.setRegion(g);c=0;for(d=w.length;c<d;c++){e=w[c];if((a=g.intersect(e))&&!e.selected){e.selected=true;k.select(c,true)}else if(!a&&e.selected){e.selected=false;k.deselect(c)}}}function l(){Ext.isIE||k.un("containerclick",t,k);n&&n.setDisplayed(false)}function i(a){u=new Ext.dd.DragTracker({onBeforeStart:h,onStart:m,onDrag:f,onEnd:l});u.initEl(a.el)}j=j||{};var k,n,u,w,x,g=new Ext.lib.Region(0,0,0,0),r=j.dragSafe===
true;this.init=function(a){k=a;k.on("render",i)}};if("function"!==typeof RegExp.escape)RegExp.escape=function(j){if("string"!==typeof j)return j;return j.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};Ext.ns("Ext.ux.form");
Ext.ux.form.LovCombo=Ext.extend(Ext.form.ComboBox,{checkField:"checked",separator:",",initComponent:function(){if(!this.tpl)this.tpl='<tpl for="."><div class="x-combo-list-item"><img class="ux-lovcombo-icon ux-lovcombo-icon-{[values.'+this.checkField+'?"checked":"unchecked"]}"><div class="ux-lovcombo-item-text">{'+(this.displayField||"text")+"}</div></div></tpl>";Ext.ux.form.LovCombo.superclass.initComponent.apply(this,arguments);this.on({scope:this,beforequery:this.onBeforeQuery,blur:this.onRealBlur});
this.onLoad=this.onLoad.createSequence(function(){if(this.el){var j=this.el.dom.value;this.el.dom.value="";this.el.dom.value=j}})},initEvents:function(){Ext.ux.form.LovCombo.superclass.initEvents.apply(this,arguments);this.keyNav.tab=false},clearValue:function(){this.value="";this.setRawValue(this.value);this.store.clearFilter();this.store.each(function(j){j.set(this.checkField,false)},this);if(this.hiddenField)this.hiddenField.value="";this.applyEmptyText()},getCheckedDisplay:function(){var j=RegExp(this.separator,
"g");return this.getCheckedValue(this.displayField).replace(j,this.separator+" ")},getCheckedValue:function(j){j=j||this.valueField;var p=[];(this.store.snapshot||this.store.data).each(function(t){t.get(this.checkField)&&p.push(t.get(j))},this);return p.join(this.separator)},onBeforeQuery:function(j){j.query=j.query.replace(RegExp(this.getCheckedDisplay()+"[ "+this.separator+"]*"),"")},onRealBlur:function(){this.list.hide();var j=this.getRawValue().split(RegExp(RegExp.escape(this.separator)+" *")),
p=[],t=this.store.snapshot||this.store.data;Ext.each(j,function(h){t.each(function(m){h===m.get(this.displayField)&&p.push(m.get(this.valueField))},this)},this);this.setValue(p.join(this.separator));this.store.clearFilter()},beforeBlur:Ext.emptyFn,onSelect:function(j,p){if(this.fireEvent("beforeselect",this,j,p)!==false){j.set(this.checkField,!j.get(this.checkField));this.store.isFiltered()&&this.doQuery(this.allQuery);this.setValue(this.getCheckedValue());this.fireEvent("select",this,j,p)}},setValue:function(j){if(j){j=
""+j;if(this.valueField){this.store.clearFilter();this.store.each(function(p){var t=!!j.match("(^|"+this.separator+")"+RegExp.escape(p.get(this.valueField))+"("+this.separator+"|$)");p.set(this.checkField,t)},this);this.value=this.getCheckedValue();this.setRawValue(this.getCheckedDisplay());if(this.hiddenField)this.hiddenField.value=this.value}else{this.value=j;this.setRawValue(j);if(this.hiddenField)this.hiddenField.value=j}this.el&&this.el.removeClass(this.emptyClass)}else this.clearValue()},selectAll:function(){this.store.each(function(j){j.set(this.checkField,
true)},this);this.doQuery(this.allQuery);this.setValue(this.getCheckedValue())},deselectAll:function(){this.clearValue()}});Ext.reg("lovcombo",Ext.ux.form.LovCombo);Ext.namespace("Ext.ux");
Ext.ux.MDHash=function(j,p,t,h){function m(g,r){var a=(g&65535)+(r&65535);return(g>>16)+(r>>16)+(a>>16)<<16|a&65535}function f(g,r,a,b,c,d){g=m(m(r,g),m(b,d));return m(g<<c|g>>>32-c,a)}function l(g,r,a,b,c,d,e){return f(r&a|~r&b,g,r,c,d,e)}function i(g,r,a,b,c,d,e){return f(r&b|a&~b,g,r,c,d,e)}function k(g,r,a,b,c,d,e){return f(a^(r|~b),g,r,c,d,e)}function n(g,r){g[r>>5]|=128<<r%32;g[(r+64>>>9<<4)+14]=r;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=0;e<g.length;e+=16){var o=a,s=b,
q=c,v=d;a=l(a,b,c,d,g[e+0],7,-680876936);d=l(d,a,b,c,g[e+1],12,-389564586);c=l(c,d,a,b,g[e+2],17,606105819);b=l(b,c,d,a,g[e+3],22,-1044525330);a=l(a,b,c,d,g[e+4],7,-176418897);d=l(d,a,b,c,g[e+5],12,1200080426);c=l(c,d,a,b,g[e+6],17,-1473231341);b=l(b,c,d,a,g[e+7],22,-45705983);a=l(a,b,c,d,g[e+8],7,1770035416);d=l(d,a,b,c,g[e+9],12,-1958414417);c=l(c,d,a,b,g[e+10],17,-42063);b=l(b,c,d,a,g[e+11],22,-1990404162);a=l(a,b,c,d,g[e+12],7,1804603682);d=l(d,a,b,c,g[e+13],12,-40341101);c=l(c,d,a,b,g[e+14],
17,-1502002290);b=l(b,c,d,a,g[e+15],22,1236535329);a=i(a,b,c,d,g[e+1],5,-165796510);d=i(d,a,b,c,g[e+6],9,-1069501632);c=i(c,d,a,b,g[e+11],14,643717713);b=i(b,c,d,a,g[e+0],20,-373897302);a=i(a,b,c,d,g[e+5],5,-701558691);d=i(d,a,b,c,g[e+10],9,38016083);c=i(c,d,a,b,g[e+15],14,-660478335);b=i(b,c,d,a,g[e+4],20,-405537848);a=i(a,b,c,d,g[e+9],5,568446438);d=i(d,a,b,c,g[e+14],9,-1019803690);c=i(c,d,a,b,g[e+3],14,-187363961);b=i(b,c,d,a,g[e+8],20,1163531501);a=i(a,b,c,d,g[e+13],5,-1444681467);d=i(d,a,b,c,
g[e+2],9,-51403784);c=i(c,d,a,b,g[e+7],14,1735328473);b=i(b,c,d,a,g[e+12],20,-1926607734);a=f(b^c^d,a,b,g[e+5],4,-378558);d=f(a^b^c,d,a,g[e+8],11,-2022574463);c=f(d^a^b,c,d,g[e+11],16,1839030562);b=f(c^d^a,b,c,g[e+14],23,-35309556);a=f(b^c^d,a,b,g[e+1],4,-1530992060);d=f(a^b^c,d,a,g[e+4],11,1272893353);c=f(d^a^b,c,d,g[e+7],16,-155497632);b=f(c^d^a,b,c,g[e+10],23,-1094730640);a=f(b^c^d,a,b,g[e+13],4,681279174);d=f(a^b^c,d,a,g[e+0],11,-358537222);c=f(d^a^b,c,d,g[e+3],16,-722521979);b=f(c^d^a,b,c,g[e+
6],23,76029189);a=f(b^c^d,a,b,g[e+9],4,-640364487);d=f(a^b^c,d,a,g[e+12],11,-421815835);c=f(d^a^b,c,d,g[e+15],16,530742520);b=f(c^d^a,b,c,g[e+2],23,-995338651);a=k(a,b,c,d,g[e+0],6,-198630844);d=k(d,a,b,c,g[e+7],10,1126891415);c=k(c,d,a,b,g[e+14],15,-1416354905);b=k(b,c,d,a,g[e+5],21,-57434055);a=k(a,b,c,d,g[e+12],6,1700485571);d=k(d,a,b,c,g[e+3],10,-1894986606);c=k(c,d,a,b,g[e+10],15,-1051523);b=k(b,c,d,a,g[e+1],21,-2054922799);a=k(a,b,c,d,g[e+8],6,1873313359);d=k(d,a,b,c,g[e+15],10,-30611744);c=
k(c,d,a,b,g[e+6],15,-1560198380);b=k(b,c,d,a,g[e+13],21,1309151649);a=k(a,b,c,d,g[e+4],6,-145523070);d=k(d,a,b,c,g[e+11],10,-1120210379);c=k(c,d,a,b,g[e+2],15,718787259);b=k(b,c,d,a,g[e+9],21,-343485551);a=m(a,o);b=m(b,s);c=m(c,q);d=m(d,v)}return[a,b,c,d]}function u(g){for(var r=[],a=(1<<h)-1,b=0;b<g.length*h;b+=h)r[b>>5]|=(g.charCodeAt(b/h)&a)<<b%32;return r}function w(g){for(var r="",a=(1<<h)-1,b=0;b<g.length*32;b+=h)r+=String.fromCharCode(g[b>>5]>>>b%32&a);return r}function x(g){for(var r=t?"0123456789ABCDEF":
"0123456789abcdef",a="",b=0;b<g.length*4;b++)a+=r.charAt(g[b>>2]>>b%4*8+4&15)+r.charAt(g[b>>2]>>b%4*8&15);return a}p=p||false;t=t||false;h=h||8;return p?w(n(u(j),j.length*h)):x(n(u(j),j.length*h))};
(function(){Ext.namespace("Ext.ux");var j=false,p,t;Ext.ux.TinyMCE=Ext.extend(Ext.form.Field,{tinymceSettings:null,allowBlank:true,invalidText:_("The value in this field is invalid"),invalidClass:"invalid-content-body",minLengthText:_("The minimum length for this field is {0}"),maxLengthText:_("The maximum length for this field is {0}"),blankText:_("This field is required"),hideMode:"offsets",constructor:function(h){var m={tinymceSettings:{accessibility_focus:false}};Ext.apply(m,h);this.addEvents({editorcreated:true});
Ext.ux.TinyMCE.superclass.constructor.call(this,m)},initComponent:function(){this.tinymceSettings=this.tinymceSettings||{};Ext.ux.TinyMCE.initTinyMCE({language:this.tinymceSettings.language})},initEvents:function(){this.originalValue=this.getValue()},onRender:function(h,m){Ext.ux.TinyMCE.superclass.onRender.call(this,h,m);if(Ext.type(this.width)=="number")this.tinymceSettings.width=this.width;if(Ext.type(this.height)=="number")this.tinymceSettings.height=this.height;this.el.dom.setAttribute("tabIndex",
-1);this.el.addClass("x-hidden");this.textareaEl=this.el;var f={overflow:"hidden"};if(Ext.isIE){f["margin-top"]="-1px";f["margin-bottom"]="-1px"}this.wrapEl=this.el.wrap({style:f});this.actionMode="wrapEl";this.positionEl=this.wrapEl;f=this.getId();this.ed=new tinymce.Editor(f,this.tinymceSettings);this.ed.addShortcut("ctrl+f","","");var l=new Ext.util.DelayedTask(this.validate,this);this.ed.onKeyPress.add(function(){l.delay(250)}.createDelegate(this));this.ed.onBeforeRenderUI.add(function(i){i.controlManager=
new t(this,i)}.createDelegate(this));this.ed.onPostRender.add(function(i){var k=i.settings,n=Ext.get(Ext.DomQuery.selectNode("#"+this.ed.id+"_tbl td.mceToolbar"));if(n!=null){var u=n.select("table.mceToolbar");Ext.DomHelper.append(n,{tag:"div",cls:"_tbar-wrap",style:{overflow:"hidden"}},true).appendChild(u)}i.windowManager=new p({control:this,editor:this.ed,manager:this.manager});Ext.get(i.getContentAreaContainer()).addClass("patch-content-body");Ext.Element.fly(k.content_editable?i.getBody():i.getWin()).on("focus",
this.onFocus,this)}.createDelegate(this));f=function(i,k){this.fireEvent("change",this,k.content)}.createDelegate(this);this.ed.onChange.add(f);this.ed.onUndo.add(f);this.ed.onRedo.add(f);this.ed.onKeyDown.add(function(){this.fireEvent("keydown",this,Ext.EventObject)}.createDelegate(this));this.ed.onKeyUp.add(function(){this.fireEvent("keyup",this,Ext.EventObject)}.createDelegate(this));this.ed.onKeyPress.add(function(){this.fireEvent("keypress",this,Ext.EventObject)}.createDelegate(this));this.ed.render();
(function(){if(this.isVisible()){var i=this.getSize();this.withEd(function(){this._setEditorSize(i.width,i.height);this.fireEvent("editorcreated",this)})}else arguments.callee.defer(50,this)}).call(this)},getResizeEl:function(){return this.wrapEl},getName:function(){return this.rendered&&this.textareaEl.dom.name?this.textareaEl.dom.name:this.name||""},initValue:function(){if(this.rendered)if(this.value!==undefined)this.setValue(this.value);else{var h=this.textareaEl.value;h&&this.setValue(h)}else Ext.ux.TinyMCE.superclass.initValue.call(this)},
beforeDestroy:function(){this.wrapEl&&this.wrapEl.remove();this.ed&&this.ed.remove();this.wrapEl&&Ext.destroy(this.wrapEl);Ext.ux.TinyMCE.superclass.beforeDestroy.call(this)},getRawValue:function(){if(!this.rendered||!this.ed.initialized)return Ext.value(this.value,"");var h=this.ed.getContent();if(h===this.emptyText)h="";return h},getValue:function(){if(!this.rendered||!this.ed.initialized)return Ext.value(this.value,"");var h=this.ed.getContent();if(h===this.emptyText||h===undefined)h="";return h},
setRawValue:function(h){this.value=h;this.rendered&&this.withEd(function(){this.ed.undoManager.clear();this.ed.setContent(h===null||h===undefined?"":h);this.ed.startContent=this.ed.getContent({format:"raw"})})},setValue:function(h){if(this.value!==h){this.value=h;this.rendered&&this.withEd(function(){this.ed.undoManager.clear();this.ed.setContent(h===null||h===undefined?"":h);this.ed.startContent=this.ed.getContent({format:"raw"});this.validate()})}},insertAtCursor:function(h){this.ed.execCommand("mceInsertContent",
false,h);this.ed.undoManager.clear()},isDirty:function(){if(this.disabled||!this.rendered)return false;return this.ed&&this.ed.initialized&&this.ed.isDirty()},syncValue:function(){this.rendered&&this.ed.initialized&&this.ed.save()},getEd:function(){return this.ed},disable:function(){this.withEd(function(){var h=this.ed.getBody();h=Ext.get(h);if(h.hasClass("mceContentBody")){h.removeClass("mceContentBody");h.addClass("mceNonEditable")}});Ext.ux.TinyMCE.superclass.disable.call(this)},enable:function(){this.withEd(function(){var h=
this.ed.getBody();h=Ext.get(h);if(h.hasClass("mceNonEditable")){h.removeClass("mceNonEditable");h.addClass("mceContentBody")}});Ext.ux.TinyMCE.superclass.enable.call(this)},onResize:function(h,m){if(Ext.type(h)!="number")h=this.getWidth();if(Ext.type(m)!="number")m=this.getHeight();h==0||m==0||this.rendered&&this.isVisible()&&this.withEd(function(){this._setEditorSize(h,m)})},_setEditorSize:function(h,m){if(this.ed.theme.AdvancedTheme){if(h<100)h=100;if(m<129)m=129;var f=Ext.get(this.ed.id+"_tbl"),
l=Ext.get(this.ed.id+"_ifr"),i=f.child("._tbar-wrap"),k=h;if(f)k=h-f.getFrameWidth("lr");var n=0;if(i){n=i.getHeight();var u=i.findParent("td",5,true);n+=u.getFrameWidth("tb");i.setWidth(k)}i=f.child(".mceStatusbar");u=0;if(i)u+=i.getHeight();n=m-n-u;if(i=l.findParent("td",5,true))n-=i.getFrameWidth("tb");f.setSize(h,m);l.setSize(k,n)}},focus:function(h,m){if(m)this.focus.defer(typeof m=="number"?m:10,this,[h,false]);else{this.withEd(function(){this.ed.focus()});return this}},processValue:function(h){return Ext.util.Format.stripTags(h)},
validateValue:function(h){if(Ext.isFunction(this.validator)){var m=this.validator(h);if(m!==true){this.markInvalid(m);return false}}if(h.length<1||h===this.emptyText)if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}if(h.length<this.minLength){this.markInvalid(String.format(this.minLengthText,this.minLength));return false}if(h.length>this.maxLength){this.markInvalid(String.format(this.maxLengthText,this.maxLength));return false}if(this.vtype){m=
Ext.form.VTypes;if(!m[this.vtype](h,this)){this.markInvalid(this.vtypeText||m[this.vtype+"Text"]);return false}}if(this.regex&&!this.regex.test(h)){this.markInvalid(this.regexText);return false}return true},withEd:function(h){if(this.ed)this.ed.initialized?h.call(this):this.ed.onInit.add(function(){h.defer(10,this)}.createDelegate(this));else this.on("editorcreated",function(){this.withEd(h)},this)},_unbindBlurAndFocus:function(){Ext.util.Observable.capture(this,function(){return false})},_bindBlurAndFocus:function(){this.ed.focus();
Ext.util.Observable.releaseCapture(this)}});Ext.apply(Ext.ux.TinyMCE,{tinymcePlugins:"pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template",initTinyMCE:function(h){if(!j){p=Ext.extend(tinymce.WindowManager,{control:null,constructor:function(f){p.superclass.constructor.call(this,f.editor);this.control=f.control;this.manager=f.manager},alert:function(f,
l,i){Ext.MessageBox.alert("",this.editor.getLang(f,f),function(){Ext.isEmpty(l)||l.call(this)},i)},confirm:function(f,l,i){Ext.MessageBox.confirm("",this.editor.getLang(f,f),function(k){Ext.isEmpty(l)||l.call(this,k=="yes")},i)},open:function(f,l){this.control._unbindBlurAndFocus();f=f||{};l=l||{};if(!f.type)this.bookmark=this.editor.selection.getBookmark("simple");f.width=parseInt(f.width||320);f.height=parseInt(f.height||240)+(tinymce.isIE?8:0);f.min_width=parseInt(f.min_width||150);f.min_height=
parseInt(f.min_height||100);f.max_width=parseInt(f.max_width||2E3);f.max_height=parseInt(f.max_height||2E3);f.movable=true;f.resizable=true;l.mce_width=f.width;l.mce_height=f.height;l.mce_inline=true;this.features=f;this.params=l;var i=new Ext.Window({title:f.name,width:f.width,height:f.height,minWidth:f.min_width,minHeight:f.min_height,resizable:true,maximizable:f.maximizable,minimizable:f.minimizable,modal:true,stateful:false,constrain:true,manager:this.manager,layout:"fit",items:[new Ext.BoxComponent({autoEl:{tag:"iframe",
src:f.url||f.file},style:"border-width: 0px;"})],listeners:{beforeclose:function(){this.control._bindBlurAndFocus()},scope:this}});l.mce_window_id=i.getId();i.show(null,function(){f.left&&f.top&&i.setPagePosition(f.left,f.top);var k=i.getPosition();f.left=k[0];f.top=k[1];this.onOpen.dispatch(this,f,l)},this);return i},close:function(f){if(!f.tinyMCEPopup||!f.tinyMCEPopup.id)p.superclass.close.call(this,f);else if(f=Ext.getCmp(f.tinyMCEPopup.id)){this.onClose.dispatch(this);f.close()}},setTitle:function(f,
l){if(!f.tinyMCEPopup||!f.tinyMCEPopup.id)p.superclass.setTitle.call(this,f,l);else{var i=Ext.getCmp(f.tinyMCEPopup.id);i&&i.setTitle(l)}},resizeBy:function(f,l,i){if(i=Ext.getCmp(i)){var k=i.getSize();i.setSize(k.width+f,k.height+l)}},focus:function(f){(f=Ext.getCmp(f))&&f.setActive(true)}});t=Ext.extend(tinymce.ControlManager,{control:null,constructor:function(f,l,i){this.control=f;t.superclass.constructor.call(this,l,i)},createDropMenu:function(f,l){var i=t.superclass.createDropMenu.call(this,
f,l),k=i.showMenu;i.showMenu=function(n,u,w){k.call(this,n,u,w);Ext.fly("menu_"+this.id).setStyle("z-index",200001)};return i},createColorSplitButton:function(f,l){var i=t.superclass.createColorSplitButton.call(this,f,l),k=i.showMenu;i.showMenu=function(n,u,w){k.call(this,n,u,w);Ext.fly(this.id+"_menu").setStyle("z-index",200001)};return i}});var m={mode:"none",plugins:Ext.ux.TinyMCE.tinymcePlugins,theme:"advanced"};Ext.apply(m,h);tinymce.dom.Event.domLoaded||tinymce.dom.Event._pageInit();tinyMCE.init(m);
j=true}}});Ext.ComponentMgr.registerType("tinymce",Ext.ux.TinyMCE)})();var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");
(function(){function j(a,b){if(!XRegExp.isRegExp(a))throw TypeError("type RegExp expected");var c=a._xregexp;a=XRegExp(a.source,p(a)+(b||""));if(c)a._xregexp={source:c.source,captureNames:c.captureNames?c.captureNames.slice(0):null};return a}function p(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function t(a,b,c,d){var e=k.length,o,s,q;i=true;try{for(;e--;){q=k[e];if(c&q.scope&&(!q.trigger||q.trigger.call(d))){q.pattern.lastIndex=b;if((s=
q.pattern.exec(a))&&s.index===b){o={output:q.handler.call(d,s,c),match:s};break}}}}catch(v){throw v;}finally{i=false}return o}function h(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(c=c||0;c<a.length;c++)if(a[c]===b)return c;return-1}XRegExp=function(a,b){var c=[],d=XRegExp.OUTSIDE_CLASS,e=0,o,s;if(XRegExp.isRegExp(a)){if(b!==undefined)throw TypeError("can't supply flags when constructing one RegExp from another");return j(a)}if(i)throw Error("can't call the XRegExp constructor within token definition functions");
b=b||"";for(o={hasNamedCapture:false,captureNames:[],hasFlag:function(q){return b.indexOf(q)>-1},setFlag:function(q){b+=q}};e<a.length;)if(s=t(a,e,d,o)){c.push(s.output);e+=s.match[0].length||1}else if(s=n.exec.call(r[d],a.slice(e))){c.push(s[0]);e+=s[0].length}else{s=a.charAt(e);if(s==="[")d=XRegExp.INSIDE_CLASS;else if(s==="]")d=XRegExp.OUTSIDE_CLASS;c.push(s);e++}c=RegExp(c.join(""),n.replace.call(b,f,""));c._xregexp={source:a,captureNames:o.hasNamedCapture?o.captureNames:null};return c};XRegExp.version=
"1.5.0";XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var m=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,f=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,l=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,i=false,k=[],n={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},u=n.exec.call(/()??/,"")[1]===undefined,w=function(){var a=/^/g;n.test.call(a,"");return!a.lastIndex}(),x=function(){var a=/x/g;n.replace.call("x",a,"");return!a.lastIndex}(),
g=RegExp.prototype.sticky!==undefined,r={};r[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;r[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(a,b,c,d){k.push({pattern:j(a,"g"+(g?"y":"")),handler:b,scope:c||XRegExp.OUTSIDE_CLASS,trigger:d||null})};XRegExp.cache=function(a,b){var c=a+"/"+(b||"");return XRegExp.cache[c]||
(XRegExp.cache[c]=XRegExp(a,b))};XRegExp.copyAsGlobal=function(a){return j(a,"g")};XRegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};XRegExp.execAt=function(a,b,c,d){b=j(b,"g"+(d&&g?"y":""));b.lastIndex=c=c||0;a=b.exec(a);return d?a&&a.index===c?a:null:a};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens");}};XRegExp.isRegExp=function(a){return Object.prototype.toString.call(a)==="[object RegExp]"};XRegExp.iterate=
function(a,b,c,d){for(var e=j(b,"g"),o=-1,s;s=e.exec(a);){c.call(d,s,++o,a,e);e.lastIndex===s.index&&e.lastIndex++}if(b.global)b.lastIndex=0};XRegExp.matchChain=function(a,b){return function c(d,e){var o=b[e].regex?b[e]:{regex:b[e]},s=j(o.regex,"g"),q=[],v;for(v=0;v<d.length;v++)XRegExp.iterate(d[v],s,function(y){q.push(o.backref?y[o.backref]||"":y[0])});return e===b.length-1||!q.length?q:c(q,e+1)}([a],0)};RegExp.prototype.apply=function(a,b){return this.exec(b[0])};RegExp.prototype.call=function(a,
b){return this.exec(b)};RegExp.prototype.exec=function(a){var b=n.exec.apply(this,arguments),c;if(b){if(!u&&b.length>1&&h(b,"")>-1){c=RegExp(this.source,n.replace.call(p(this),"g",""));n.replace.call(a.slice(b.index),c,function(){for(var e=1;e<arguments.length-2;e++)if(arguments[e]===undefined)b[e]=undefined})}if(this._xregexp&&this._xregexp.captureNames)for(var d=1;d<b.length;d++)if(c=this._xregexp.captureNames[d-1])b[c]=b[d];!w&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}return b};
if(!w)RegExp.prototype.test=function(a){(a=n.exec.call(this,a))&&this.global&&!a[0].length&&this.lastIndex>a.index&&this.lastIndex--;return!!a};String.prototype.match=function(a){XRegExp.isRegExp(a)||(a=RegExp(a));if(a.global){var b=n.match.apply(this,arguments);a.lastIndex=0;return b}return a.exec(this)};String.prototype.replace=function(a,b){var c=XRegExp.isRegExp(a),d,e;if(c&&typeof b.valueOf()==="string"&&b.indexOf("${")===-1&&x)return n.replace.apply(this,arguments);if(c){if(a._xregexp)d=a._xregexp.captureNames}else a+=
"";if(typeof b==="function")e=n.replace.call(this,a,function(){if(d){arguments[0]=new String(arguments[0]);for(var o=0;o<d.length;o++)if(d[o])arguments[0][d[o]]=arguments[o+1]}if(c&&a.global)a.lastIndex=arguments[arguments.length-2]+arguments[0].length;return b.apply(null,arguments)});else{e=this+"";e=n.replace.call(e,a,function(){var o=arguments;return n.replace.call(b,m,function(s,q,v){if(q)switch(q){case "$":return"$";case "&":return o[0];case "`":return o[o.length-1].slice(0,o[o.length-2]);case "'":return o[o.length-
1].slice(o[o.length-2]+o[0].length);default:v="";q=+q;if(!q)return s;for(;q>o.length-3;){v=String.prototype.slice.call(q,-1)+v;q=Math.floor(q/10)}return(q?o[q]||"":"$")+v}else{q=+v;if(q<=o.length-3)return o[q];q=d?h(d,v):-1;return q>-1?o[q+1]:s}})})}if(c&&a.global)a.lastIndex=0;return e};String.prototype.split=function(a,b){if(!XRegExp.isRegExp(a))return n.split.apply(this,arguments);var c=this+"",d=[],e=0,o,s;if(b===undefined||+b<0)b=Infinity;else{b=Math.floor(+b);if(!b)return[]}for(a=XRegExp.copyAsGlobal(a);o=
a.exec(c);){if(a.lastIndex>e){d.push(c.slice(e,o.index));o.length>1&&o.index<c.length&&Array.prototype.push.apply(d,o.slice(1));s=o[0].length;e=a.lastIndex;if(d.length>=b)break}a.lastIndex===o.index&&a.lastIndex++}if(e===c.length){if(!n.test.call(a,"")||s)d.push("")}else d.push(c.slice(e));return d.length>b?d.slice(0,b):d};XRegExp.addToken(/\(\?#[^)]*\)/,function(a){return n.test.call(l,a.input.slice(a.index+a[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);
return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,function(a){this.captureNames.push(a[1]);this.hasNamedCapture=true;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(a){var b=h(this.captureNames,a[1]);return b>-1?"\\"+(b+1)+(isNaN(a.input.charAt(a.index+a[0].length))?"":"(?:)"):a[0]});XRegExp.addToken(/\[\^?]/,function(a){return a[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(a){this.setFlag(a[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(a){return n.test.call(l,
a.input.slice(a.index+a[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();if(!XRegExp)throw ReferenceError("XRegExp must be loaded before the Unicode plugin");
(function(){var j={};XRegExp.addUnicodePackage=function(p){var t=/\w{4}/g,h=/[- _]+/g,m,f;for(f in p)if(p.hasOwnProperty(f)){m=f.replace(h,"").toLowerCase();j.hasOwnProperty(m)||(j[m]=p[f].replace(t,"\\u$&"))}};XRegExp.addToken(/\\([pP]){(\^?)([^}]*)}/,function(p,t){var h=p[1]==="P"||p[2],m=p[3].replace(/[- _]+/g,"").toLowerCase();if(p[1]==="P"&&p[2])throw SyntaxError("erroneous characters: "+p[0]);if(h&&t===XRegExp.INSIDE_CLASS)throw SyntaxError("not supported in character classes: \\"+p[1]+"{"+
p[2]+"...}");if(!j.hasOwnProperty(m))throw SyntaxError("invalid or unsupported Unicode item: "+p[0]);return t===XRegExp.OUTSIDE_CLASS?"["+(h?"^":"")+j[m]+"]":j[m]},XRegExp.INSIDE_CLASS|XRegExp.OUTSIDE_CLASS);XRegExp.addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"})})();
